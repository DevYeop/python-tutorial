import unittest   # unittest: 파이썬에 기본 포함된 "테스트 전용 도구" 모듈


# -------------------------------------------------------------
# TestCase를 상속받아 "테스트 전용 클래스를 만든다"
#
# - unittest.TestCase 는 "테스트 기능을 가진 부모 클래스"
# - 우리는 이 기능을 그대로 물려받기 위해 상속한다.
# -------------------------------------------------------------
class TestMyFunction(unittest.TestCase):

    # ---------------------------------------------------------
    # test_ 로 시작하는 메서드만 unittest가 자동으로 "테스트"로 인식함
    #
    # self란?
    # - 클래스 안의 메서드가 자신(self)에게 접근하기 위한 첫 번째 매개변수
    # - "나는 지금 TestMyFunction이라는 클래스 안의 메서드를 실행 중이야"
    #   이런 의미의 자기 자신 참조
    #
    # 예: self.assertEqual()
    # - assertEqual은 TestCase가 제공하는 기능
    # - self를 통해 "현재 실행 중인 테스트 객체"에서 그 기능을 사용함
    # ---------------------------------------------------------
    def test_example(self):
        result = 1 + 1    # 우리가 테스트하고 싶은 코드
# test_example.py
import unittest

# ---------------------------------------------------------
# 이 파일에는 테스트할 함수도, 테스트도 모두 한 파일에 넣었다.
# 초보자가 흐름을 이해하기 가장 쉬운 형태이다.
# ---------------------------------------------------------

# (테스트할 함수)
def add_one(num):
    """숫자를 1 증가시켜 반환하는 아주 간단한 함수"""
    return num + 1


class TestAddOne(unittest.TestCase):

    # -----------------------------------------------------
    # setUp()
    #
    # - "각 테스트가 시작될 때" 자동으로 실행됨
    # - 테스트마다 새롭게 초기 상태를 준비하는 역할
    #
    # 초보자 이해 포인트:
    # 테스트 함수가 여러 개라면 각각 시작하기 전에 setUp()이 매번 실행됨
    # -----------------------------------------------------
    def setUp(self):
        print(">> setUp 실행됨 (테스트 시작 전 준비 작업)")
        self.start_number = 10   # 테스트에 사용할 숫자 준비


    # -----------------------------------------------------
    # tearDown()
    #
    # - "각 테스트가 종료될 때" 자동으로 실행됨
    # - 파일 닫기 / 임시파일 삭제 / DB 연결 종료 같은 정리 작업에 사용됨
    #
    # 초보자 이해 포인트:
    # 테스트 1개가 끝나면 tearDown()이 무조건 실행됨
    # -----------------------------------------------------
    def tearDown(self):
        print(">> tearDown 실행됨 (테스트 종료 후 정리 작업)\n")


    # -----------------------------------------------------
    # 실제 테스트 1개
    #
    # 반드시 함수 이름이 test_ 로 시작해야 unittest가 자동 인식함
    # -----------------------------------------------------
    def test_add_one(self):
        print(">> test_add_one 실행 중…")
        
        # 준비된 값 self.start_number = 10
        result = add_one(self.start_number)

        # add_one(10) → 11 이 맞는지 테스트
        self.assertEqual(result, 11)


# ---------------------------------------------------------
# 이 파일을 직접 실행할 때만 아래 코드가 작동함
# python test_example.py
# ---------------------------------------------------------
if __name__ == "__main__":
    unittest.main()
        # self.assertEqual(값, 기대값)
        # 두 값이 같으면 테스트 성공, 다르면 테스트 실패!
        self.assertEqual(result, 2)
        # 즉 "1 + 1 은 2가 맞다"를 테스트하는 것이다.


# -------------------------------------------------------------
# __name__ 과 '__main__' 은 무엇인가?
#
# - 파이썬 파일은 실행될 때 특별한 변수를 하나 가진다: __name__
#
# (1) 직접 실행하는 경우:
#     python test_file.py
#     → __name__ 값은 "__main__"
#
# (2) 다른 파일에서 import 되는 경우:
#     import test_file
#     → __name__ 값은 "test_file"
#
# 즉,
#   if __name__ == "__main__":
# 는
#   "이 파일이 직접 실행될 때만 아래 코드를 실행해라"
# 라는 뜻이다.
#
# unittest.main() 은
# "이 파일 안의 test_로 시작하는 모든 테스트를 실행" 하는 명령.
# -------------------------------------------------------------
if __name__ == '__main__':
    unittest.main()   # 테스트 실행
